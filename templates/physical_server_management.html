<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Physical Server Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='physical_server_management.css') }}">
  <style>
    /* Minor styling tweak for button group spacing */
    .button-group button {
      min-width: 130px;
    }
    /* Make the overlay cover whole screen */
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4);
      z-index: 999;
    }
    /* Form popup styling */
    .form-popup {
      position: fixed;
      top: 20%;
      left: 35%;
      width: 30%;
      z-index: 1000;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
  <a class="navbar-brand" href="#">Server Inventory Manager</a>
  <div class="ms-auto dropdown">
    <button class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown">Admin</button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="#">Profile</a></li>
      <li><a class="dropdown-item" href="#">Logout</a></li>
    </ul>
  </div>
</nav>

<!-- Sidebar + Main Content -->
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <nav class="col-md-2 d-none d-md-block bg-light sidebar pt-3 min-vh-100">
      <ul class="nav flex-column">
        <li class="nav-item"><a class="nav-link" href="home.html">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link active" href="#">Physical Servers</a></li>
        <li class="nav-item"><a class="nav-link" href="#">VM Management</a></li>
        <li class="nav-item"><a class="nav-link" href="#">User Management</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Log Management</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Settings</a></li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="col-md-10 ms-sm-auto px-4 pt-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">Physical Server Management</h2>
        <input
          id="serverSearchInput"
          type="search"
          class="form-control w-auto"
          placeholder="Search Server ID or Name..."
          aria-label="Search Servers"
          onkeyup="filterServers()"
          style="min-width: 250px;"
        />
      </div>

      <!-- Button Group -->
      <div class="mb-3 button-group">
        <button class="btn btn-success me-2" onclick="openForm('add')">Add Server</button>
        <button class="btn btn-warning me-2" onclick="openForm('update')">Update Server</button>
        <button class="btn btn-danger me-2" onclick="deleteSelected()">Delete Server</button>
        <button class="btn btn-secondary" onclick="location.href='assign_server.html'">Assign Server to Team</button>
      </div>

      <!-- Server Table -->
      <div class="table-responsive">
        <table class="table table-bordered" id="serverTable">
          <thead class="table-dark">
            <tr>
              <th>Select</th>
              <th>S_ID</th>
              <th>Server Name</th>
              <th>Type</th>
              <th>CPU Usage</th>
              <th>RAM Usage</th>
              <th>Disk Space</th>
              <th>Assigned To</th>
              <th>Uptime</th>
              <th>Other</th>
            </tr>
          </thead>
          <tbody id="serverTableBody">
            <!-- Populated dynamically -->
          </tbody>
        </table>
      </div>

      <!-- Footer Buttons -->
      <div class="mt-4">
        <button class="btn btn-outline-danger me-2" onclick="checkUsage()">Alerts</button>
        <button class="btn btn-outline-primary me-2" onclick="location.href='schedule_maintainenace.html'">Schedule Maintenance</button>
        <button class="btn btn-outline-secondary" onclick="location.href='manage_users_teams.html'">Manage Users & Teams</button>
      </div>
    </main>
  </div>
</div>

<!-- Form Popup Overlay -->
<div class="overlay" id="overlay" onclick="closeForm()" style="display:none;"></div>

<!-- Form Popup -->
<div class="form-popup card p-4" id="formPopup" style="display:none;">
  <h5 id="formTitle" class="mb-3">Add New Server</h5>
  <input type="text" id="sid" class="form-control mb-2" placeholder="Server ID" readonly />
  <input type="text" id="name" class="form-control mb-2" placeholder="Server Name" />
  <input type="text" id="type" class="form-control mb-2" value="Physical" readonly />
  <input type="text" id="cpu" class="form-control mb-2" placeholder="CPU Usage (e.g. 60%)" />
  <input type="text" id="ram" class="form-control mb-2" placeholder="RAM Usage (e.g. 70%)" />
  <input type="text" id="disk" class="form-control mb-2" placeholder="Disk Space (e.g. 100gb/500gb)" />
  <input type="text" id="assigned" class="form-control mb-2" placeholder="Assigned To" />
  <input type="text" id="uptime" class="form-control mb-2" placeholder="Uptime (e.g. 12h)" />
  <button class="btn btn-primary w-100 mb-2" onclick="submitForm()">Submit</button>
  <button class="btn btn-danger w-100" onclick="closeForm()">Cancel</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='physical_server_management.js') }}"></script>

</body>
</html>
